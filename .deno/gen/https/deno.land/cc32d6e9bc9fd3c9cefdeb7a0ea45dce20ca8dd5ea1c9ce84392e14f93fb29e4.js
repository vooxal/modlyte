import { isWindows } from "./util.ts";
import { VR_SHELL } from "./consts.ts";
const OS_SHELL_ENV_NAME = isWindows ? "ComSpec" : "SHELL";
const OS_FALLBACK_SHELL = isWindows ? "cmd.exe" : "sh";
export function resolveShell() {
  let shell = Deno.env.get(VR_SHELL);
  if (!shell && isWindows) {
    shell = "C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe";
  }
  if (validateShellFile(shell)) {
    return shell;
  }
  shell = Deno.env.get(OS_SHELL_ENV_NAME);
  if (validateShellFile(shell)) {
    return shell;
  }
  return OS_FALLBACK_SHELL;
}
function validateShellFile(shell) {
  try {
    return shell && Deno.statSync(shell).isFile;
  } catch (e) {
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzb2x2ZV9zaGVsbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJlc29sdmVfc2hlbGwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUN0QyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBRXZDLE1BQU0saUJBQWlCLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQztBQUMxRCxNQUFNLGlCQUFpQixHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7QUFFdkQsTUFBTSxVQUFVLFlBQVk7SUFDMUIsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDbkMsSUFBSSxDQUFDLEtBQUssSUFBSSxTQUFTLEVBQUU7UUFDdkIsS0FBSyxHQUFHLGdFQUFnRSxDQUFDO0tBQzFFO0lBQ0QsSUFBSSxpQkFBaUIsQ0FBQyxLQUFLLENBQUM7UUFBRSxPQUFPLEtBQWUsQ0FBQztJQUNyRCxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUN4QyxJQUFJLGlCQUFpQixDQUFDLEtBQUssQ0FBQztRQUFFLE9BQU8sS0FBZSxDQUFDO0lBQ3JELE9BQU8saUJBQWlCLENBQUM7QUFDM0IsQ0FBQztBQUVELFNBQVMsaUJBQWlCLENBQUMsS0FBeUI7SUFDbEQsSUFBSTtRQUNGLE9BQU8sS0FBSyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDO0tBQzdDO0lBQUMsT0FBTyxDQUFDLEVBQUU7S0FFWDtBQUNILENBQUMifQ==
